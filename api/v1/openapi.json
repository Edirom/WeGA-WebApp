{
  "openapi": "3.0.1",
  "info": {
    "title": "WeGA API",
    "description": "The OpenAPI documentation for the RESTful interface of the Carl-Maria-von-Weber-Gesamtausgabe. <br/> (No registration, authentication, or API key is required) <br/> For feedback or requests about this API please contact stadler@weber-gesamtausgabe.de or start the discussion at https://github.com/Edirom/WeGA-WebApp",
    "version": "1.1.0"
  },
  "servers": [
    {
      "url": "http://localhost:8080/exist/apps/WeGA-WebApp/api/v1"
    }
  ],
  "tags": [
    {
      "name": "Documents",
      "description": "Access to the documents of the WeGA digital edition"
    },
    {
      "name": "Search",
      "description": "Access to search functions of the WeGA digital edition"
    },
    {
      "name": "Code Samples",
      "description": "Access to encoding features"
    },
    {
      "name": "Application",
      "description": "Access to application settings"
    },
    {
      "name": "Facets",
      "description": "Access to facets for filtering result sets"
    },
    {
      "name": "Repositories",
      "description": "Access to items within the WeGA digital edition by repository"
    }
  ],
  "paths": {
    "/documents": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Lists all documents",
        "description": "The Documents endpoint returns a list of all documents from the WeGA digital edition.\n",
        "parameters": [
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/repositories": {
      "get": {
        "tags": [
          "Repositories"
        ],
        "summary": "Lists all repositories",
        "description": "The endpoint returns a list of all repositories within the WeGA digital edition.\n",
        "parameters": [
          {
            "name": "city",
            "in": "query",
            "description": "The WeGA city ID to filter for, e.g. \"A130002\" (Berlin)",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of repositories",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Repository"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/repositories/items": {
      "get": {
        "tags": [
          "Repositories"
        ],
        "summary": "Lists all items from a repository within the WeGA",
        "description": "The endpoint returns a list of all items within the WeGA digital edition for a given repository.\n",
        "parameters": [
          {
            "name": "siglum",
            "in": "query",
            "description": "The RISM siglum to filter for, e.g. \"D-B\" (Staatsbibliothek zu Berlin – Preußischer Kulturbesitz, Musikabteilung)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "term",
            "in": "query",
            "description": "The search term to be looked for in this item's description",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "orderby",
            "in": "query",
            "description": "The property to which ordering should be applied",
            "schema": {
              "type": "string",
              "enum": [
                "idno",
                "docID",
                "sortdate",
                "docType",
                "title"
              ]
            }
          },
          {
            "name": "orderdir",
            "in": "query",
            "description": "The ordering direction for the property given in 'orderby'",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of items",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              },
              "filteredrecordcount": {
                "description": "The total size of the result set after appplying a filter",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Item"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/search/entity": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Search for a WeGA entity",
        "description": "This endpoint returns the search results for an entity's name or title.\n",
        "parameters": [
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/qParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/documents/{docID}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Returns documents by ID",
        "description": "This endpoint returns documents, indicated by an ID.\n Accepted ID formats are WeGA, e.g. A002068 or http://weber-gesamtausgabe.de/A002068, VIAF, e.g. http://viaf.org/viaf/14959938, Wikidata, e.g. http://www.wikidata.org/entity/Q154812, or GND, e.g. http://d-nb.info/gnd/118629662\n",
        "parameters": [
          {
            "name": "docID",
            "in": "path",
            "description": "The document identifier to search for",
            "required": true,
            "schema": {
              "type": "string",
              "default": "A002068"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/documents/findByDate": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Finds documents by date",
        "description": "This endpoint returns a list of documents related to the given date – optionally filtered by document type. \n",
        "parameters": [
          {
            "name": "fromDate",
            "in": "query",
            "description": "The min date to search for",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "default": "1786-11-18T00:00:00.000+0000"
            }
          },
          {
            "name": "toDate",
            "in": "query",
            "description": "The max date to search for",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/documents/findByMention/{docID}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Finds documents by reference",
        "description": "This endpoint returns a list of documents that reference a particular docID – optionally filtered by document type. \n",
        "parameters": [
          {
            "name": "docID",
            "in": "path",
            "description": "The document ID that is to be mentioned. Accepted ID formats are WeGA, e.g. A002068 or http://weber-gesamtausgabe.de/A002068, VIAF, e.g. http://viaf.org/viaf/14959938, Wikidata, e.g. http://www.wikidata.org/entity/Q154812, or GND, e.g. http://d-nb.info/gnd/118629662\n",
            "required": true,
            "schema": {
              "type": "string",
              "default": "A002068"
            }
          },
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/documents/findByAuthor/{authorID}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Finds documents by author",
        "description": "This endpoint returns a list of documents by a given author – optionally filtered by document type \n",
        "parameters": [
          {
            "name": "authorID",
            "in": "path",
            "description": "The author ID to search for. Accepted ID formats are WeGA, e.g. A002068 or http://weber-gesamtausgabe.de/A002068, VIAF, e.g. http://viaf.org/viaf/14959938, Wikidata, e.g. http://www.wikidata.org/entity/Q154812, or GND, e.g. http://d-nb.info/gnd/118629662\n",
            "required": true,
            "schema": {
              "type": "string",
              "default": "A002068"
            }
          },
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Document"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/code/findByElement/{element}": {
      "get": {
        "tags": [
          "Code Samples"
        ],
        "summary": "Finds code samples by XML element",
        "parameters": [
          {
            "name": "element",
            "in": "path",
            "description": "The XML element to search for",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "namespace",
            "in": "query",
            "description": "The element namespace. Defaults to the TEI namespace",
            "schema": {
              "type": "string",
              "default": "http://www.tei-c.org/ns/1.0"
            }
          },
          {
            "$ref": "#/components/parameters/docTypeParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of documents",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CodeSample"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/application/status": {
      "get": {
        "tags": [
          "Application"
        ],
        "summary": "Get status information about the running WeGA-WebApp",
        "responses": {
          "200": {
            "description": "Healthy – A single object with status information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "Status (healthy|unhealthy) of the currently running WeGA-WebApp",
                      "default": "healthy"
                    },
                    "svnRevision": {
                      "type": "integer",
                      "description": "The Subversion revision of the currently installed WeGA-data"
                    },
                    "deployment": {
                      "type": "string",
                      "description": "The datetime of the deployment of the WeGA-WebApp",
                      "format": "date-time"
                    },
                    "version": {
                      "pattern": "^\\d+\\.\\d+\\.\\d+$",
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unhealthy – A single object with status information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "Status (healthy|unhealthy) of the currently running WeGA-WebApp",
                      "default": "unhealthy"
                    },
                    "svnRevision": {
                      "type": "integer",
                      "description": "The Subversion revision of the currently installed WeGA-data"
                    },
                    "deployment": {
                      "type": "string",
                      "description": "The datetime of the deployment of the WeGA-WebApp",
                      "format": "date-time"
                    },
                    "version": {
                      "pattern": "^\\d+\\.\\d+\\.\\d+$",
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/application/newID": {
      "get": {
        "tags": [
          "Application"
        ],
        "summary": "Create a new WeGA ID",
        "parameters": [
          {
            "$ref": "#/components/parameters/docTypeRequiredParam"
          }
        ],
        "responses": {
          "200": {
            "description": "A single object with a fresh WeGA ID",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "docID": {
                      "pattern": "^A[A-F0-9]{6}$",
                      "type": "string",
                      "description": "The WeGA ID"
                    },
                    "docType": {
                      "type": "string",
                      "description": "The WeGA document type"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "The creation of new IDs is only available in the development environment",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "format": "int32",
                      "default": 403
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/facets/{facet}": {
      "get": {
        "tags": [
          "Facets"
        ],
        "summary": "Returns facets",
        "parameters": [
          {
            "name": "facet",
            "in": "path",
            "description": "The facet to search for",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "sender",
                "addressee"
              ]
            }
          },
          {
            "name": "scope",
            "in": "query",
            "description": "The scope of the result set, i.e. 'indices' or a WeGA ID",
            "required": true,
            "schema": {
              "pattern": "^(indices)|(A[A-F0-9]{6})$",
              "type": "string"
            }
          },
          {
            "name": "term",
            "in": "query",
            "description": "The search term to be looked for in the facet's label",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/docTypeRequiredParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "An array of facets",
            "headers": {
              "totalrecordcount": {
                "description": "The total size of the result set",
                "schema": {
                  "type": "integer"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Facet"
                  }
                }
              }
            }
          },
          "default": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Document": {
        "type": "object",
        "properties": {
          "uri": {
            "type": "string",
            "description": "Unique identifier representing a specific document"
          },
          "docID": {
            "type": "string",
            "description": "The WeGA document identifier representing a specific document"
          },
          "docType": {
            "type": "string",
            "description": "The WeGA document type"
          },
          "title": {
            "type": "string",
            "description": "The title of the document"
          }
        }
      },
      "CodeSample": {
        "type": "object",
        "properties": {
          "uri": {
            "type": "string",
            "description": "Unique identifier representing a specific document"
          },
          "docID": {
            "type": "string",
            "description": "The WeGA document identifier representing a specific document"
          },
          "codeSample": {
            "type": "string",
            "description": "The code snippet"
          }
        }
      },
      "Facet": {
        "type": "object",
        "properties": {
          "value": {
            "pattern": "^A[A-F0-9]{6}$",
            "type": "string",
            "description": "the WeGA ID"
          },
          "label": {
            "type": "string",
            "description": "The name or title of the object"
          },
          "frequency": {
            "type": "integer",
            "description": "The sum of occurences of the object for the current result set"
          }
        }
      },
      "Repository": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name or title of the repository"
          },
          "siglum": {
            "type": "string",
            "description": "The siglum according to RISM, see https://rism.info/community/sigla/about.html"
          },
          "frequency": {
            "type": "integer",
            "description": "The absolute number of occurence of this repository"
          }
        }
      },
      "Item": {
        "type": "object",
        "properties": {
          "uri": {
            "type": "string",
            "description": "Unique identifier representing a specific document"
          },
          "docID": {
            "type": "string",
            "description": "The WeGA document identifier representing a specific document"
          },
          "docType": {
            "type": "string",
            "description": "The WeGA document type"
          },
          "title": {
            "type": "string",
            "description": "The WeGA title of the item"
          },
          "related_entities": {
            "type": "array",
            "items": {
              "required": [
                "name"
              ],
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "The name of the related entity"
                },
                "uri": {
                  "type": "string",
                  "description": "Unique identifier representing a specific entity"
                },
                "docID": {
                  "type": "string",
                  "description": "The WeGA document identifier of the related entity"
                },
                "rel": {
                  "type": "string",
                  "description": "Defines the relationship between the related entity and the current item",
                  "enum": [
                    "author",
                    "sender",
                    "recipient",
                    "place_of_sender",
                    "place_of_recipient"
                  ]
                }
              }
            }
          },
          "date": {
            "type": "string",
            "description": "The creation date of the item as verbal representation including ranges and uncertainties"
          },
          "sortdate": {
            "type": "string",
            "description": "The normalized creation date of the item in yyyy-mm-dd format",
            "format": "date"
          },
          "incipit": {
            "type": "string",
            "description": "The text incipit"
          },
          "repository": {
            "type": "object",
            "properties": {
              "siglum": {
                "type": "string",
                "description": "The RISM siglum of the repository"
              },
              "city": {
                "type": "string",
                "description": "The name of the city where the repository is located"
              },
              "name": {
                "type": "string",
                "description": "The name of the repository"
              }
            }
          },
          "extent": {
            "type": "string",
            "description": "Extent of the item"
          },
          "idno": {
            "type": "string",
            "description": "The shelf mark or other identifier for the item within the repository"
          },
          "comment": {
            "type": "string",
            "description": "Some comment regarding the item"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "fields": {
            "type": "string"
          }
        }
      }
    },
    "parameters": {
      "offsetParam": {
        "name": "offset",
        "in": "query",
        "description": "Position of first item to retrieve (starting from 1)",
        "schema": {
          "minimum": 1,
          "type": "integer",
          "format": "int32",
          "default": 1
        }
      },
      "limitParam": {
        "name": "limit",
        "in": "query",
        "description": "Number of items to retrieve (200 max)",
        "schema": {
          "maximum": 200,
          "type": "integer",
          "format": "int32",
          "default": 10
        }
      },
      "fromDateParam": {
        "name": "fromDate",
        "in": "query",
        "description": "The earliest date",
        "schema": {
          "type": "string",
          "format": "date"
        }
      },
      "toDateParam": {
        "name": "toDate",
        "in": "query",
        "description": "The latest date",
        "schema": {
          "type": "string",
          "format": "date"
        }
      },
      "qParam": {
        "name": "q",
        "in": "query",
        "description": "The query string",
        "schema": {
          "type": "string"
        }
      },
      "docTypeParam": {
        "name": "docType",
        "in": "query",
        "description": "The WeGA document type",
        "style": "form",
        "explode": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "biblio",
              "diaries",
              "documents",
              "letters",
              "news",
              "orgs",
              "persons",
              "places",
              "thematicCommentaries",
              "var",
              "works",
              "writings"
            ]
          }
        }
      },
      "docTypeRequiredParam": {
        "name": "docType",
        "in": "query",
        "description": "The WeGA document type",
        "required": true,
        "style": "form",
        "explode": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "biblio",
              "diaries",
              "documents",
              "letters",
              "news",
              "orgs",
              "persons",
              "places",
              "thematicCommentaries",
              "var",
              "works",
              "writings"
            ]
          }
        }
      }
    }
  }
}